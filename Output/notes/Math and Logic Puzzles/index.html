<!DOCTYPE html><html lang="en"><head><title>Povilas Staškus - iOS Developer</title><meta name="twitter:title" content="Povilas Staškus - iOS Developer"/><meta name="og:title" content="Povilas Staškus - iOS Developer"/><meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/pure-min.css" integrity="sha384-oAOxQR6DkCoMliIh8yFnu25d7Eq/PHS21PClpwjOTeU2jRSq11vu66rf90/cZr47" crossorigin="anonymous"/><link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/grids-responsive-min.css"/><link rel="stylesheet" href="/Pure/styles.css"/><link rel="stylesheet" href="/all.css"/></head><body><div id="layout" class="pure-g"><div><div class="pure-menu pure-menu-horizontal pure-u-1-1 top-header"><a class="pure-menu-heading" href="/">staskus.io</a><ul class="pure-menu-list"><li class="pure-menu-item"><a class="pure-menu-link" href="/about">About</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/notes">Notes</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/afterWork">After work</a></li></ul></div></div><div class="sidebar pure-u-1 pure-u-md-1-4"><div class="header"><div id="layout" class="pure-g"><div class="author__avatar"><img src="https://avatars0.githubusercontent.com/u/4062343?s=460&v=4"/></div><div class="pure-u-md-1-1 pure-u-3-4"><h1 class="brand-title">Povilas Staškus</h1><h3 class="brand-tagline">iOS Developer</h3></div></div><div id="layout" class="pure-g"><div class="pure-u-md-1-1"><a href="https://en.wikipedia.org/wiki/Vilnius"><i class="fas fa-map-marker-alt l-box social-icon"></i><a class="social-media" href="https://en.wikipedia.org/wiki/Vilnius">Vilnius, Lithuania</a></a></div><div class="pure-u-md-1-1"><a href="mailto:povilas@staskus.io"><i class="fas fa-envelope-open-text l-box social-icon"></i><a class="social-media" href="mailto:povilas@staskus.io">Email</a></a></div><div class="pure-u-md-1-1"><a href="https://www.linkedin.com/in/povilas-staškus-6b10528b"><i class="fab fa-linkedin l-box social-icon"></i><a class="social-media" href="https://www.linkedin.com/in/povilas-staškus-6b10528b">LinkedIn</a></a></div><div class="pure-u-md-1-1"><a href="https://github.com/nitesuit"><i class="fab fa-github-square l-box social-icon"></i><a class="social-media" href="https://github.com/nitesuit">GitHub</a></a></div><div class="pure-u-md-1-1"><a href="https://twitter.com/PovilasStaskus"><i class="fab fa-twitter-square l-box social-icon"></i><a class="social-media" href="https://twitter.com/PovilasStaskus">Twitter</a></a></div></div></div></div><div class="content pure-u-1 pure-u-md-3-5 pure-u-xl-6-10"><h2 class="post-title"><a href="/notes/Math and Logic Puzzles">Math and Logic Puzzles</a></h2><p class="post-meta">Last modified: 2022 March 31</p><div class="post-description"><div><h2>Popular tasks</h2><h3>Generate a list of prime numbers</h3><pre><code><span class="comment">// The Sieve of Eeratosthenes is a way to generate a list of primes by recognizing that all non-prime numbers are divisible by a prime number

// The idea is to cross of numbers that are divisible by the next available prime

// Example: 13

// We cross of powers of 2: 4, 6, 8, 10, 12
// Then cross of powers of 3: 9, 12
// We do that until the prime we pass is less than or equal to the square root of the max number

// We can optimize by only dealing with odd numbers</span>

<span class="keyword">func</span> countPrimes(<span class="keyword">_</span> n: <span class="type">Int</span>) -&gt; <span class="type">Int</span> {
    <span class="keyword">guard</span> n &gt;= <span class="number">2</span> <span class="keyword">else</span> { <span class="keyword">return</span> <span class="number">0</span> }
    
    <span class="keyword">var</span> flags: [<span class="type">Bool</span>] = <span class="type">Array</span>(repeating: <span class="keyword">true</span>, count: n)
    flags[<span class="number">0</span>] = <span class="keyword">false</span>
    flags[<span class="number">1</span>] = <span class="keyword">false
    
    var</span> prime = <span class="number">2</span>
    
    <span class="keyword">while</span> prime &lt;= <span class="type">Int</span>(<span class="type">Double</span>(n).<span class="call">squareRoot</span>()) {
        <span class="call">crossOff</span>(flags: &amp;flags, prime: prime)
        
        prime = <span class="call">getNextPrime</span>(flags: flags, prime: prime)
    }
    
    <span class="keyword">return</span> flags
        .<span class="call">filter</span> { $0 }  
        .<span class="dotAccess">count</span>
}

<span class="keyword">private func</span> crossOff(flags: <span class="keyword">inout</span> [<span class="type">Bool</span>], prime: <span class="type">Int</span>) {
    <span class="keyword">for</span> i <span class="keyword">in</span> stride(from: prime * prime, to: flags.<span class="property">count</span>, by: prime) {
        flags[i] = <span class="keyword">false</span>
    }
}

<span class="keyword">private func</span> getNextPrime(flags: [<span class="type">Bool</span>], prime: <span class="type">Int</span>) -&gt; <span class="type">Int</span> {
    <span class="keyword">var</span> next = prime + <span class="number">1</span>
    
    <span class="keyword">while</span> next &lt; flags.<span class="property">count</span> &amp;&amp; !flags[next] {
        next += <span class="number">1</span>
    }
    
    <span class="keyword">return</span> next
}
</code></pre></div></div></div><div class="footer pure-u-1"><div class="pure-u-1">© 2022 Povilas Staškus</div><div class="pure-u-1">Generated using <a href="https://github.com/johnsundell/publish">Publish</a></div><div class="pure-u-1"><a href="/feed.rss">RSS feed</a></div></div></div></body></html>